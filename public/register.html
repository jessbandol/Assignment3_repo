<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>

    <link rel="stylesheet" href="log.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header section">
        <h1>⋆˚✿˖° cloudscape charms ⋆˚✿˖°</h1>
        <p>fill your life with an abundance of charm!</p>
    </div>

    <form action="/register" method="POST" onsubmit="return validateForm()">
        <div class="container">
          <h1>Register</h1>
          <p>Please fill in this form to create an account.</p>
      
            <!-- Display username error message -->
            <div id="nameError" style="color: red; font-family: 'Comfortaa', sans-serif; margin-top: 10px; font-size: 16px;"></div>
            <input type="text" placeholder="Enter Name" name="name" id="name" required>

            <!-- Display email error message -->
            <div id="emailError" style="color: red; font-family: 'Comfortaa', sans-serif; margin-top: 10px; font-size: 16px;"></div>
            <input type="text" placeholder="Enter Email" name="email" id="email" required>
            
            <input type="password" placeholder="Enter Password" name="password" id="psw" required>

            <input type="password" placeholder="Repeat Password" name="psw-repeat" id="psw-repeat" required>

            <button type="submit" class="registerbtn">Register</button>
          
          <!-- Alert container -->
          <div id="alertContainer"></div>

        </div>
      
        <div class="container signin">
          <p>Already have an account? <a href="login.html">Sign in</a>.</p>
        </div>
    </form>
    <script>
        let params = (new URL(document.location)).searchParams;
        let order = [];

        // For each prod, push the value to the array
        params.forEach((value, key) => {
            if (key.startsWith('prod')) {
                order.push(parseInt(value));
            }
        });
        //console.log(JSON.stringify(order));

        //gets the error from the url and checks to see if its empty or null, if not, fill in the message
        let error = params.get('error');
        if(error !== null && error !== ''){
            document.getElementById('errorMessages').innerHTML += `<div id="errorMessages" class="alert alert-danger">${error}</div>`;
        }

        //gets the params from url
        let email = params.get('email');
        let username = params.get('name');

        //makes values sticky
        if(email !== null){
            document.getElementById('email').value = email;
        }

        if(username !== null){
            document.getElementById('name').value = name;
        }

        // Set the value of the hidden input field to the JSON representation of the order array
        document.getElementById('orderParams').value = JSON.stringify(order);
        document.getElementById('orderReg').value = JSON.stringify(order);

    /*
        document.addEventListener('DOMContentLoaded', function () {
          // Retrieve selected quantities from local storage
          const selectedQuantities = JSON.parse(localStorage.getItem('selectedQuantities'));
  
          // Check if there are selected quantities
          if (selectedQuantities) {
              // Do something with the quantities (e.g., display them on the page)
              // You might want to use AJAX to send these quantities to the server and associate them with the user.
              // For simplicity, let's just log them for now.
              console.log('Selected Quantities:', selectedQuantities);
  
              // Clear the selected quantities from local storage (optional, depending on your use case)
              localStorage.removeItem('selectedQuantities');
          }
      });
        
      function validateForm() {
        const password = document.getElementById('psw').value;
        const confirmPassword = document.getElementById('psw-repeat').value;

        // Check if passwords match
        if (password !== confirmPassword) {
            // Show red alert message with Comfortaa font and space
            document.getElementById('alertContainer').innerHTML = '<div class="alert" style="color: red; font-family: \'Comfortaa\', sans-serif; margin-top: 10px; font-size: 20px;">Passwords do not match.</div>';
            // Prevent form submission
            return false;
        }

        document.getElementById('usernameError').innerHTML = '';
        document.getElementById('emailError').innerHTML = '';

        // Continue with the form submission
        return true;
    }
    function showError(errorContainerId, message) {
        // Display the error message within the specified container
        document.getElementById(errorContainerId).innerHTML = `<div class="alert" style="color: red; font-family: 'Comfortaa', sans-serif; margin-top: 10px; font-size: 20px;">${message}</div>`;
    }
*/

    </script>        
</body>
</html>