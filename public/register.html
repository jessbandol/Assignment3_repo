<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Page</title>

    <script type="text/javascript" src="./functions.js"></script>
    <script type="text/javascript" src="./navbar.js"></script>

    <link rel="stylesheet" href="log.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@500;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="header section">
        <h1>cloudscape charms</h1>
        <p>fill your life with an abundance of charm!</p>
    
          <div id = "sticky-navbar">
              <a class = "nav-link mx-3 highlight" href="/cart.html">
                  <span id="cart_total"></span>Cart
              </a>
          </div>
    
          <div id = "nav_container"></div>
    
          <nav class = "navbar navbar-expand-md">
            <button class="navbar-toggler" id="toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            </button>
    
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
              <div class="navbar-nav">
                <li><a class="nav-link mx-3 highlight" href="/index.html" active>Home</a></li>
                <script>nav_bar(products_key, products)</script>
              </div>
            </div>
          </nav>
    </div>

    <form action="/process_register" method="POST" name="register_form">
        <div class="container">
          <h1>Register</h1>
          <p>Please fill in this form to create an account.</p>
      
            <!-- Display username error message -->
            <div id="nameError" style="color: red; font-family: 'Comfortaa', sans-serif; margin-top: 10px; font-size: 16px;"></div>
            <input type="text" placeholder="Enter Name" name="name" id="name" required>

            <!-- Display email error message -->
            <div id="emailError" style="color: red; font-family: 'Comfortaa', sans-serif; margin-top: 10px; font-size: 16px;"></div>
            <input type="text" placeholder="Enter Email" name="email" id="email" required>
            
            <input type="password" placeholder="Enter Password" name="password" id="psw" required>

            <input type="password" placeholder="Repeat Password" name="psw-repeat" id="psw-repeat" required>

            <button type="submit" class="registerbtn">Register</button>
          
          <!-- Alert container -->
          <div id="alertContainer"></div>

        </div>
      
        <div class="container signin">
          <p>Already have an account? <a href="login.html">Sign in</a>.</p>
        </div>
    </form>
    <script>
        let params = (new URL(document.location)).searchParams;

        window.onload = function() {
            let register_form = document.forms['register_form'];

            register_form.elements['name'].value = params.get('name');
            register_form.elements['email'].value = params.get('email');

            for (let i = 0; i <= document.getElementsByClassName('form-group').length; i++) {
                let inputName = register_form.elements[i].name;

                if (params.has(`${inputName}_length`)) {
                    document.getElementById(`${inputName}_error`).innerHTML = params.get(`${inputName}_length`);

                    if (params.has(`{inputName}_type`)) {
                        document.getAnimations(`${inputName}_error`).innerHTML = params.get(`${inputName}_length`) + `<br>` + params.get(`${inputName}_type`);
                    }
                }
                else if (params.has(`${inputName}_type`)) {
                    document.getElementById(`${inputName}_error`).innerHTML = params.get(`${inputName}_type`);
                }
            }
        }
    </script>        
</body>
</html>